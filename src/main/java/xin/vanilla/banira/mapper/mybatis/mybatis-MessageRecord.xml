<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="xin.vanilla.banira.mapper.IMessageRecordDao">

    <resultMap id="resultMap" type="xin.vanilla.banira.domain.MessageRecord">
        <id property="id" column="id"/>
        <result property="msgId" column="msg_id"/>
        <result property="botId" column="bot_id"/>
        <result property="senderId" column="sender_id"/>
        <result property="targetId" column="target_id"/>
        <result property="groupId" column="group_id"/>
        <result property="time" column="time"/>
        <result property="msgRaw" column="msg_raw"/>
        <result property="msgType" column="msg_type"/>
        <result property="msgRecode" column="msg_recode"/>
    </resultMap>

    <sql id="allColumn">
        t.id, t.msg_id, t.bot_id, t.sender_id, t.target_id, t.group_id, t.time, t.msg_raw, t.msg_type, t.msg_recode
    </sql>

    <sql id="baseColumn">
        t.id, t.msg_id, t.bot_id, t.sender_id, t.target_id, t.group_id, t.time, t.msg_raw, t.msg_type
    </sql>

    <sql id="whereSql">
        <trim prefix="WHERE" prefixOverrides="AND | OR ">
            <include refid="whereSqlInner"/>
        </trim>
    </sql>

    <sql id="whereSqlInner">
        <if test="id_null != null">
            AND t.id IS NULL
        </if>
        <if test="id != null">
            AND t.id = #{id}
        </if>
        <if test="id_array != null">
            AND t.id IN
            <foreach collection="id_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="id_list != null">
            AND t.id IN
            <foreach collection="id_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="id_array_or != null">
            AND
            <foreach collection="id_array_or" item="item" open="(" separator="OR" close=")">
                (t.id = #{item})
            </foreach>
        </if>
        <if test="id_list_or != null">
            AND
            <foreach collection="id_list_or" item="item" open="(" separator="OR" close=")">
                (t.id = #{item})
            </foreach>
        </if>
        <if test="id_lt != null">
            <![CDATA[ AND t.id < #{id} ]]>
        </if>
        <if test="id_lt_eq != null">
            <![CDATA[ AND t.id <= #{id} ]]>
        </if>
        <if test="id_gt != null">
            <![CDATA[ AND t.id > #{id} ]]>
        </if>
        <if test="id_gt_eq != null">
            <![CDATA[ AND t.id >= #{id} ]]>
        </if>

        <if test="msgId_null != null">
            AND t.msg_id IS NULL
        </if>
        <if test="msgId != null">
            AND t.msg_id LIKE #{msgId}
        </if>
        <if test="msgId_array != null">
            AND t.msg_id IN
            <foreach collection="msgId_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="msgId_list != null">
            AND t.msg_id IN
            <foreach collection="msgId_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="msgId_array_or != null">
            AND
            <foreach collection="msgId_array_or" item="item" open="(" separator="OR" close=")">
                (t.msg_id LIKE #{item})
            </foreach>
        </if>
        <if test="msgId_list_or != null">
            AND
            <foreach collection="msgId_list_or" item="item" open="(" separator="OR" close=")">
                (t.msg_id LIKE #{item})
            </foreach>
        </if>

        <if test="botId_null != null">
            AND t.bot_id IS NULL
        </if>
        <if test="botId != null">
            AND t.bot_id = #{botId}
        </if>
        <if test="botId_array != null">
            AND t.bot_id IN
            <foreach collection="botId_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="botId_list != null">
            AND t.bot_id IN
            <foreach collection="botId_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="botId_array_or != null">
            AND
            <foreach collection="botId_array_or" item="item" open="(" separator="OR" close=")">
                (t.bot_id = #{item})
            </foreach>
        </if>
        <if test="botId_list_or != null">
            AND
            <foreach collection="botId_list_or" item="item" open="(" separator="OR" close=")">
                (t.bot_id = #{item})
            </foreach>
        </if>
        <if test="botId_lt != null">
            <![CDATA[ AND t.bot_id < #{botId} ]]>
        </if>
        <if test="botId_lt_eq != null">
            <![CDATA[ AND t.bot_id <= #{botId} ]]>
        </if>
        <if test="botId_gt != null">
            <![CDATA[ AND t.bot_id > #{botId} ]]>
        </if>
        <if test="botId_gt_eq != null">
            <![CDATA[ AND t.bot_id >= #{botId} ]]>
        </if>

        <if test="senderId_null != null">
            AND t.sender_id IS NULL
        </if>
        <if test="senderId != null">
            AND t.sender_id = #{senderId}
        </if>
        <if test="senderId_array != null">
            AND t.sender_id IN
            <foreach collection="senderId_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="senderId_list != null">
            AND t.sender_id IN
            <foreach collection="senderId_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="senderId_array_or != null">
            AND
            <foreach collection="senderId_array_or" item="item" open="(" separator="OR" close=")">
                (t.sender_id = #{item})
            </foreach>
        </if>
        <if test="senderId_list_or != null">
            AND
            <foreach collection="senderId_list_or" item="item" open="(" separator="OR" close=")">
                (t.sender_id = #{item})
            </foreach>
        </if>
        <if test="senderId_lt != null">
            <![CDATA[ AND t.sender_id < #{senderId} ]]>
        </if>
        <if test="senderId_lt_eq != null">
            <![CDATA[ AND t.sender_id <= #{senderId} ]]>
        </if>
        <if test="senderId_gt != null">
            <![CDATA[ AND t.sender_id > #{senderId} ]]>
        </if>
        <if test="senderId_gt_eq != null">
            <![CDATA[ AND t.sender_id >= #{senderId} ]]>
        </if>

        <if test="targetId_null != null">
            AND t.target_id IS NULL
        </if>
        <if test="targetId != null">
            AND t.target_id = #{targetId}
        </if>
        <if test="targetId_array != null">
            AND t.target_id IN
            <foreach collection="targetId_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="targetId_list != null">
            AND t.target_id IN
            <foreach collection="targetId_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="targetId_array_or != null">
            AND
            <foreach collection="targetId_array_or" item="item" open="(" separator="OR" close=")">
                (t.target_id = #{item})
            </foreach>
        </if>
        <if test="targetId_list_or != null">
            AND
            <foreach collection="targetId_list_or" item="item" open="(" separator="OR" close=")">
                (t.target_id = #{item})
            </foreach>
        </if>
        <if test="targetId_lt != null">
            <![CDATA[ AND t.target_id < #{targetId} ]]>
        </if>
        <if test="targetId_lt_eq != null">
            <![CDATA[ AND t.target_id <= #{targetId} ]]>
        </if>
        <if test="targetId_gt != null">
            <![CDATA[ AND t.target_id > #{targetId} ]]>
        </if>
        <if test="targetId_gt_eq != null">
            <![CDATA[ AND t.target_id >= #{targetId} ]]>
        </if>

        <if test="groupId_null != null">
            AND t.group_id IS NULL
        </if>
        <if test="groupId != null">
            AND t.group_id = #{groupId}
        </if>
        <if test="groupId_array != null">
            AND t.group_id IN
            <foreach collection="groupId_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="groupId_list != null">
            AND t.group_id IN
            <foreach collection="groupId_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="groupId_array_or != null">
            AND
            <foreach collection="groupId_array_or" item="item" open="(" separator="OR" close=")">
                (t.group_id = #{item})
            </foreach>
        </if>
        <if test="groupId_list_or != null">
            AND
            <foreach collection="groupId_list_or" item="item" open="(" separator="OR" close=")">
                (t.group_id = #{item})
            </foreach>
        </if>
        <if test="groupId_lt != null">
            <![CDATA[ AND t.group_id < #{groupId} ]]>
        </if>
        <if test="groupId_lt_eq != null">
            <![CDATA[ AND t.group_id <= #{groupId} ]]>
        </if>
        <if test="groupId_gt != null">
            <![CDATA[ AND t.group_id > #{groupId} ]]>
        </if>
        <if test="groupId_gt_eq != null">
            <![CDATA[ AND t.group_id >= #{groupId} ]]>
        </if>

        <if test="time_null != null">
            AND t.time IS NULL
        </if>
        <if test="time != null">
            AND t.time = #{time}
        </if>
        <if test="time_array != null">
            AND t.time IN
            <foreach collection="time_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="time_list != null">
            AND t.time IN
            <foreach collection="time_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="time_array_or != null">
            AND
            <foreach collection="time_array_or" item="item" open="(" separator="OR" close=")">
                (t.time = #{item})
            </foreach>
        </if>
        <if test="time_list_or != null">
            AND
            <foreach collection="time_list_or" item="item" open="(" separator="OR" close=")">
                (t.time = #{item})
            </foreach>
        </if>
        <if test="time_lt != null">
            <![CDATA[ AND t.time < #{time} ]]>
        </if>
        <if test="time_lt_eq != null">
            <![CDATA[ AND t.time <= #{time} ]]>
        </if>
        <if test="time_gt != null">
            <![CDATA[ AND t.time > #{time} ]]>
        </if>
        <if test="time_gt_eq != null">
            <![CDATA[ AND t.time >= #{time} ]]>
        </if>

        <if test="msgRaw_null != null">
            AND t.msg_raw IS NULL
        </if>
        <if test="msgRaw != null">
            AND t.msg_raw LIKE #{msgRaw}
        </if>
        <if test="msgRaw_array != null">
            AND t.msg_raw IN
            <foreach collection="msgRaw_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="msgRaw_list != null">
            AND t.msg_raw IN
            <foreach collection="msgRaw_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="msgRaw_array_or != null">
            AND
            <foreach collection="msgRaw_array_or" item="item" open="(" separator="OR" close=")">
                (t.msg_raw LIKE #{item})
            </foreach>
        </if>
        <if test="msgRaw_list_or != null">
            AND
            <foreach collection="msgRaw_list_or" item="item" open="(" separator="OR" close=")">
                (t.msg_raw LIKE #{item})
            </foreach>
        </if>

        <if test="msgType_null != null">
            AND t.msg_type IS NULL
        </if>
        <if test="msgType != null">
            AND t.msg_type LIKE #{msgType}
        </if>
        <if test="msgType_array != null">
            AND t.msg_type IN
            <foreach collection="msgType_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="msgType_list != null">
            AND t.msg_type IN
            <foreach collection="msgType_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="msgType_array_or != null">
            AND
            <foreach collection="msgType_array_or" item="item" open="(" separator="OR" close=")">
                (t.msg_type LIKE #{item})
            </foreach>
        </if>
        <if test="msgType_list_or != null">
            AND
            <foreach collection="msgType_list_or" item="item" open="(" separator="OR" close=")">
                (t.msg_type LIKE #{item})
            </foreach>
        </if>

        <if test="msgRecode_null != null">
            AND t.msg_recode IS NULL
        </if>
        <if test="msgRecode != null">
            AND t.msg_recode LIKE #{msgRecode}
        </if>
        <if test="msgRecode_array != null">
            AND t.msg_recode IN
            <foreach collection="msgRecode_array" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="msgRecode_list != null">
            AND t.msg_recode IN
            <foreach collection="msgRecode_list" item="item" open="(" separator="," close=")">#{item}</foreach>
        </if>
        <if test="msgRecode_array_or != null">
            AND
            <foreach collection="msgRecode_array_or" item="item" open="(" separator="OR" close=")">
                (t.msg_recode LIKE #{item})
            </foreach>
        </if>
        <if test="msgRecode_list_or != null">
            AND
            <foreach collection="msgRecode_list_or" item="item" open="(" separator="OR" close=")">
                (t.msg_recode LIKE #{item})
            </foreach>
        </if>

    </sql>

    <sql id="orderSql">
        <trim prefix="ORDER BY" suffixOverrides=",">
            <if test="_ORDER_ != null">
                <foreach collection="_ORDER_" item="item" open="" separator="," close="">
                    <include refid="orderSqlInner"/>
                </foreach>
            </if>
        </trim>
    </sql>

    <sql id="orderSqlInner">
        <if test="item == 'id_asc'">t.id ASC</if>
        <if test="item == 'id_desc'">t.id DESC</if>
        <if test="item == 'msgId_asc'">t.msg_id ASC</if>
        <if test="item == 'msgId_desc'">t.msg_id DESC</if>
        <if test="item == 'botId_asc'">t.bot_id ASC</if>
        <if test="item == 'botId_desc'">t.bot_id DESC</if>
        <if test="item == 'senderId_asc'">t.sender_id ASC</if>
        <if test="item == 'senderId_desc'">t.sender_id DESC</if>
        <if test="item == 'targetId_asc'">t.target_id ASC</if>
        <if test="item == 'targetId_desc'">t.target_id DESC</if>
        <if test="item == 'groupId_asc'">t.group_id ASC</if>
        <if test="item == 'groupId_desc'">t.group_id DESC</if>
        <if test="item == 'time_asc'">t.time ASC</if>
        <if test="item == 'time_desc'">t.time DESC</if>
        <if test="item == 'msgRaw_asc'">t.msg_raw ASC</if>
        <if test="item == 'msgRaw_desc'">t.msg_raw DESC</if>
        <if test="item == 'msgType_asc'">t.msg_type ASC</if>
        <if test="item == 'msgType_desc'">t.msg_type DESC</if>
        <if test="item == 'msgRecode_asc'">t.msg_recode ASC</if>
        <if test="item == 'msgRecode_desc'">t.msg_recode DESC</if>
    </sql>

    <delete id="deleteByParam" parameterType="java.util.Map">
        DELETE FROM message_record t
        <include refid="whereSql"/>
    </delete>

    <select id="selectCountByParam" parameterType="java.util.Map" resultType="int">
        SELECT COUNT(*) FROM message_record t
        <include refid="whereSql"/>
    </select>

    <select id="selectByParam" parameterType="java.util.Map" resultMap="resultMap">
        SELECT
        <if test="_ALL_FIELDS_ == true">
            <include refid="allColumn"/>
        </if>
        <if test="_ALL_FIELDS_ != true">
            <include refid="baseColumn"/>
        </if>
        FROM message_record t
        <include refid="whereSql"/>
        <include refid="orderSql"/>
    </select>

</mapper>
